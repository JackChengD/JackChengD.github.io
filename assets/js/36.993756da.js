(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{387:function(a,t,s){"use strict";s.r(t);var e=s(45),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"奇安信科技集团有限公司"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#奇安信科技集团有限公司"}},[a._v("#")]),a._v(" 奇安信科技集团有限公司")]),a._v(" "),s("p",[a._v("在职时间：2020.07-至今"),s("br"),a._v("\n岗位：AST1前端开发工程师\n工作内容：参与云安全管理平台、云安全运营中心业务开发、定制化项目开发、版本迭代；luban平台搭建")]),a._v(" "),s("h2",{attrs:{id:"云安全管理平台csmp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#云安全管理平台csmp"}},[a._v("#")]),a._v(" 云安全管理平台csmp")]),a._v(" "),s("p",[a._v("负责项目主线、定制化项目版本开发、支持。")]),a._v(" "),s("p",[a._v("部署场景、国际化、权限控制、图表展示/导出、单点登录、定制化换肤")]),a._v(" "),s("p",[a._v("套餐开通、拓扑编排、")]),a._v(" "),s("p",[a._v("入职接触第一个项目，这是一个长达小四年的angular项目，该项目虽然业务逻辑不复杂，但是存在有")]),a._v(" "),s("p",[a._v("2、国际化\n使用angular自带的国际化方案进行i18n\n1、安装@ngx-translate/core、@ngx-translate/http-loader"),s("br"),a._v("\n2、在assets创建i18n文件夹，包括en.json、zh.json"),s("br"),a._v("\n3、在app模块引入translateModule"),s("br"),a._v("\n4、登录页根据接口判断是什么语言，然后设值语言（addLangs、setDefaultLang、use），根据use确定用哪个json文件"),s("br"),a._v("\n5、摸板页面使用translate管道实现，JS文件可以translateService服务里面的instant、get方法来国际化，instant是同步方法，get是异步方法")]),a._v(" "),s("p",[a._v("4、图表展示/导出\n使用echarts进行图展示，主要是饼图和折线图。图的导出，后端采用photo对前端页面进行截图然后再整合一起。")]),a._v(" "),s("p",[a._v("5、单点登录\n这边单点登录都是后端会跳转到另外一个平台，用户在另外一个平台登录后再调回来，这里说一下单点登录的原理吧。\n描述：用户只需要登录一次就可以访问所有相互信任的应用系统；\nSSO一般许哟啊一个独立的认证中心(passport)，子系统的登录均得通过passport，子系统本身将不参与登录操作，当一个系统成功登录以后，passport将会颁发一个令牌给各个子系统，子系统可以拿着令牌会获取各自得受保护资源，为了减少频繁认证，各个子系统再被passport授权以后会建立一个局部绘画，在一定时间内可以无需再次向passport发起认证。")]),a._v(" "),s("p",[a._v("https://juejin.cn/post/6844903664264413198#heading-11")]),a._v(" "),s("p",[a._v("1、一套代码管理好各个版本（紧耦合部署、松耦合部署、一体机部署）"),s("br"),a._v("\n用户登录完毕后，后端接口返回当前环境，前端会在service对部署环境做处理，表明当前是什么环境，展示怎么样的页面、功能、权限。")]),a._v(" "),s("p",[a._v("2、各种安全组件的开通、套餐开通逻辑实现\n每个组件都有相同或者不同的地方，需要对不同组件进行管理，会将先写一个base类，各种组件都会继承这个base类，会提取相同的摸板，不同之处使用插槽插入。不同组件的相同部分也会被写成同一个前端组件。")]),a._v(" "),s("p",[a._v("套餐开通分为不同的套餐，是对组件的批量开通创建，所以套餐会存在大量的组件，在获取后端接口后会对数据进行统一的输出，使之覆盖所有安全组件，套餐的开通会在每个组件上统一收集信息与检验的结果确认是否能够提交。")]),a._v(" "),s("p",[a._v("4、各种身份的权限控制\n存在租户、管理员身份，对不同的身份可以分配不同的权限")]),a._v(" "),s("p",[a._v("5、定制化项目主题换肤\n项目采用的组件是NG-ZORRO，如何在不污染源代码的前提下做到定制化项目的主题换肤，解决方案是会为每一个定制化项目做一套属于她们自己主题，主要是直接修改组件的样式")]),a._v(" "),s("p",[a._v("逻辑上存在权限控制，、信息校验、图表（展示、导出）\n业务上存在各种安全组件、定制化项目、松紧耦合版本、一体机版本")]),a._v(" "),s("p",[a._v("7、双因素认证登录\n登录分为普通登录（账号密码）、双因素认证（账号密码、双因素）。管理员可为租户开启双因素认证，租户需要下载指定app获取验证码才能登录进入csmp系统")]),a._v(" "),s("p",[a._v("8、前端组件管理\n项目中封装了搜索组件、")]),a._v(" "),s("p",[a._v("9、angular管道")]),a._v(" "),s("p",[a._v("10、angular指令")]),a._v(" "),s("h3",{attrs:{id:"技术架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术架构"}},[a._v("#")]),a._v(" 技术架构")]),a._v(" "),s("p",[a._v("Angular+NG-ZORRO+Echarts")]),a._v(" "),s("h3",{attrs:{id:"个人收获"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#个人收获"}},[a._v("#")]),a._v(" 个人收获")]),a._v(" "),s("p",[a._v("掌握angular知识能够正常搬砖"),s("br"),a._v("\n对复杂业务有了系统性认识"),s("br"),a._v("\n对老代码进行新需求重构"),s("br"),a._v("\ncode review中注重代码质量与整洁\n代码阅读能力提升"),s("br"),a._v("\n同事配合工作")]),a._v(" "),s("h2",{attrs:{id:"云安全运营中心ssmp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#云安全运营中心ssmp"}},[a._v("#")]),a._v(" 云安全运营中心ssmp")]),a._v(" "),s("p",[a._v("ssmp使用公司qp框架为基础搭建的微前端项目\nqp框架是在vue-cli的基础上进行封装的框架\n使用上，会有一个大容器，容器会有N个微应用，每一个微应用都是一个模块\nqp是如何将每一个微应用结合在一起的？\n每个微应用都有会一个sitemap文件，容器会收集每个微应用的sitemap，最终生成面包屑\n微应用的路由是根据pages文件决定的，类似nuxt")]),a._v(" "),s("h3",{attrs:{id:"技术架构-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术架构-2"}},[a._v("#")]),a._v(" 技术架构")]),a._v(" "),s("p",[a._v("QP4+Vue+Echarts")]),a._v(" "),s("h2",{attrs:{id:"虚拟化平台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟化平台"}},[a._v("#")]),a._v(" 虚拟化平台")]),a._v(" "),s("p",[a._v("支持了一周的项目开发，主要完成一些图表、表格的实现")]),a._v(" "),s("h3",{attrs:{id:"技术架构-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术架构-3"}},[a._v("#")]),a._v(" 技术架构")]),a._v(" "),s("p",[a._v("JSP、JQuery、datatable")]),a._v(" "),s("h2",{attrs:{id:"鲁班luban"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#鲁班luban"}},[a._v("#")]),a._v(" 鲁班luban")]),a._v(" "),s("h3",{attrs:{id:"背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[a._v("#")]),a._v(" 背景")]),a._v(" "),s("p",[a._v("公司前端应用主要是以管理平台的形式为主，从形式上看相似度高，逻辑同质化比较多。会存在一些重复性的工作。随着业务持续增多，问题也在持续累积，需要一些快速可累积的模式让开发变得更加容易。")]),a._v(" "),s("h3",{attrs:{id:"解决问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决问题"}},[a._v("#")]),a._v(" 解决问题")]),a._v(" "),s("p",[a._v("缓解重复的开发压力、提高开发效率和质量。")]),a._v(" "),s("h3",{attrs:{id:"核心思路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心思路"}},[a._v("#")]),a._v(" 核心思路")]),a._v(" "),s("p",[a._v("可视化的搭建形成抽象的描述语言，再将此描述语言编译成不同平台的代码（angular、vue），产出的内容是源码，以便二次开发、迭代。")]),a._v(" "),s("h3",{attrs:{id:"架构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[a._v("#")]),a._v(" 架构")]),a._v(" "),s("img",{attrs:{src:a.$withBase("/images/luban/architecture.jpg"),alt:"鲁班架构图"}}),a._v(" "),s("p",[a._v("项目由编辑器、编译器、摸板、dsl定义成功。")]),a._v(" "),s("h3",{attrs:{id:"luban编辑器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#luban编辑器"}},[a._v("#")]),a._v(" luban编辑器")]),a._v(" "),s("p",[a._v("luban编辑器功能有dsl编辑区、ui展示、属性检查器、数据模型区。")]),a._v(" "),s("h4",{attrs:{id:"事情流触发过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事情流触发过程"}},[a._v("#")]),a._v(" 事情流触发过程")]),a._v(" "),s("p",[a._v("编辑器的事件流主要采用发布订阅的模式进行，不管哪个模块发生改变都会告诉总事件，由总事件触发事件再修改各个模块。")]),a._v(" "),s("h5",{attrs:{id:"操作变化过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作变化过程"}},[a._v("#")]),a._v(" 操作变化过程")]),a._v(" "),s("h6",{attrs:{id:"dsl视图模型操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dsl视图模型操作"}},[a._v("#")]),a._v(" dsl视图模型操作")]),a._v(" "),s("p",[a._v("dsl中slotMap改变→dsl监听StageDslEvent→dsl触发StageDslEvent→slot监听StageDslEvenet→slot触发ActorSelectEvent→inspector监听ActorSelectedEvent→inspector对应组件")]),a._v(" "),s("img",{attrs:{src:a.$withBase("/images/luban/event-listen1.png"),alt:"dsl、slot、inspector、相关组件事件监听、触发的过程"}}),a._v(" "),s("p",[a._v("inspector对应组件变化→inspector触发StageDslEvent→dsl监听StageDslEvent→slot监听StageDslEvenet→slot触发ActorSelectEvent→inspector监听ActorSelectedEvent→inspector对应组件")]),a._v(" "),s("h6",{attrs:{id:"dsl数据模型操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dsl数据模型操作"}},[a._v("#")]),a._v(" dsl数据模型操作")]),a._v(" "),s("p",[a._v("dsl中model改变→触发ModelDslEvent→model监听ModelDslEvent\ndsl中modelRelations改变→触发ModelDslEvent→modelRelations监听ModelRelationsDslEvent")]),a._v(" "),s("img",{attrs:{src:a.$withBase("/images/luban/event-listen2.png"),alt:"dsl、model、modelRelations事件监听、触发的过程"}}),a._v(" "),s("h4",{attrs:{id:"技术栈选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术栈选择"}},[a._v("#")]),a._v(" 技术栈选择")]),a._v(" "),s("p",[a._v("angular11、codeJar、ng-zorro-antd11、typescript")]),a._v(" "),s("h3",{attrs:{id:"luban编译器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#luban编译器"}},[a._v("#")]),a._v(" luban编译器")]),a._v(" "),s("p",[a._v("将dsl转为可用的代码（vue、angular）")]),a._v(" "),s("h4",{attrs:{id:"转为dsl转为vue"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转为dsl转为vue"}},[a._v("#")]),a._v(" 转为dsl转为vue")]),a._v(" "),s("p",[a._v("vue只有1个文件，文件包含template、script、style")]),a._v(" "),s("h4",{attrs:{id:"templte的解析过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#templte的解析过程"}},[a._v("#")]),a._v(" templte的解析过程")]),a._v(" "),s("p",[a._v("1、先确定使用了哪个业务摸板；"),s("br"),a._v("\n2、拿到dsl里面的slopMap.某个模板.children开始遍历；"),s("br"),a._v("\n3、children里面都是一个个组件，可以在dsl中知道它的信息，具体是哪个组件，有哪些绑定信息；"),s("br"),a._v("\n4、明确知道是哪个组件后，拿到它的对应摸板，然后把数据传进行，就能获取到它的html；"),s("br"),a._v("\n5、组装在一起即可。")]),a._v(" "),s("h4",{attrs:{id:"scritp的解析过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scritp的解析过程"}},[a._v("#")]),a._v(" scritp的解析过程")]),a._v(" "),s("p",[a._v("1、script里面的数据，需要在model、")]),a._v(" "),s("p",[a._v("整理model、modelRelation")]),a._v(" "),s("h4",{attrs:{id:"转为angular代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转为angular代码"}},[a._v("#")]),a._v(" 转为angular代码")]),a._v(" "),s("p",[a._v("angular包含3个文件，html、typescript、css")]),a._v(" "),s("p",[a._v("转化成代码后会使用jszip库转成压缩包返回给前端")]),a._v(" "),s("h4",{attrs:{id:"技术栈选择-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术栈选择-2"}},[a._v("#")]),a._v(" 技术栈选择")]),a._v(" "),s("p",[a._v("nestjs、ejs、typescript")]),a._v(" "),s("h3",{attrs:{id:"luban摸板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#luban摸板"}},[a._v("#")]),a._v(" luban摸板")]),a._v(" "),s("p",[a._v("基于各个业务场景编写常见的摸板。")]),a._v(" "),s("p",[a._v("摸板使用ejs语法，摸板中目前支持已经定义组件的摸板以及业务场景的摸板。")]),a._v(" "),s("h3",{attrs:{id:"luban-dsl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#luban-dsl"}},[a._v("#")]),a._v(" luban-dsl")]),a._v(" "),s("p",[a._v("描述语言（其实就是个数据结构），用来描述某一个页面，组件，逻辑的具体布局, 样子以及行为。")]),a._v(" "),s("p",[a._v("dsl中的组件根据elementUi、ng-zorro的属性进行定义，目前已定义按钮、输入框、选择框、表格等基础组件。")]),a._v(" "),s("h2",{attrs:{id:"绩效指标数字化平台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#绩效指标数字化平台"}},[a._v("#")]),a._v(" 绩效指标数字化平台")]),a._v(" "),s("p",[a._v("用于统计AST1的工作质量平台，前端写页面，后端写中间件处理已有的接口。")]),a._v(" "),s("h3",{attrs:{id:"限制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#限制"}},[a._v("#")]),a._v(" 限制")]),a._v(" "),s("p",[a._v("需要调用metabase提供的接口，来查每天AST1的工作质量情况，然后再将数据处理后存到数据库里面，向前端提供接口时直接再自己的数据库里查数据。")]),a._v(" "),s("p",[a._v("虽然metabase提供了时间段查询，但是时间段的结果不能具体到某一天，并且接口速度较慢（5秒-20秒），解决的方案是写定时任务，每天取前30天的数据存到数据库里面即可，这样做的优点是避免了有人没有填，在之后填写我们也可以拿到他的数据。缺点就是需要连续调一个月次的接口。")]),a._v(" "),s("h3",{attrs:{id:"实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[a._v("#")]),a._v(" 实现")]),a._v(" "),s("p",[a._v("根据业务分为乐高、研发ID模块")]),a._v(" "),s("h3",{attrs:{id:"技术栈选择-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#技术栈选择-3"}},[a._v("#")]),a._v(" 技术栈选择")]),a._v(" "),s("p",[a._v("前端：qp框架（公司的微前端框架）、vue、qax-design"),s("br"),a._v("\n后端：nestjs、mysql、swagger")])])}),[],!1,null,null,null);t.default=r.exports}}]);